# QoS Benchmark (2026-02-03)

## 简介
本目录包含用于验证 Agent QoS (Quality of Service) 模块性能的基准测试代码。
主要对比了**固定并发**与**自适应并发 (Adaptive Rate Limiting)** 在真实网络环境下的性能差异。

## 测试环境
- **Target**: `10.44.96.1/24` (254 IPs)
- **Ports**: Top 16 常用端口 (22, 80, 443, 3389, etc.)
- **Network**: LAN / High-Speed VPN

## 测试结果 (2026-02-03)

| 模式 | 初始并发 (Rate) | 耗时 | 速度 (hosts/s) | 发现端口 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **Baseline** (旧版模拟) | 100 | 3.90s | 65.15 | 50 | 固定低并发，未能跑满带宽 |
| **QoS Enabled** (新版) | 2000 | **1.47s** | **172.35** | 50 | 自适应调整，**性能提升 2.6 倍** |

## 结论
引入 `AdaptiveLimiter` (AIMD) 和 `RttEstimator` (RFC 6298) 后：
1.  **速度显著提升**: 在网络允许的情况下，Agent 能够自动提升并发度，大幅缩短扫描时间。
2.  **稳定性保障**: 尽管并发度大幅提升，但发现的开放端口数量与低并发模式一致，说明没有出现因拥塞导致的丢包或漏扫。

## 运行方式
```bash
go run test/20260203_qos_benchmark/main.go
```
