## 结论
config.yaml 和 .env 文件同时使用，以组合出多种环境需求，优先级 .env 文件高于 config.yaml 文件。
.env 文件中可以定义环境变量，这些环境变量会覆盖 config.yaml 文件中的同名变量。
.env 文件中可以定义敏感信息，如密码、密钥、令牌等，这些信息不应该提交到版本控制系统中。
config.yaml 文件中可以定义应用程序的基础配置，如数据库连接信息、端口号、日志级别等。
配置文件优先级：
1. .env 文件中的变量会覆盖 config.yaml 文件中的同名变量。
2. 环境变量会覆盖 .env 文件中的同名变量。
3. 命令行参数会覆盖环境变量中的同名变量。
4. 命令行参数会覆盖 config.yaml 文件中的同名变量。


## YAML配置文件 vs .env环境变量文件

### 📋 基本概念

**YAML配置文件** 和 **.env环境变量文件** 在现代应用开发中扮演不同但互补的角色，它们各有特定的用途和优势。

### 🎯 YAML配置文件的用途

**主要特点：**
- **结构化配置**：支持嵌套结构、数组、对象等复杂数据类型
- **可读性强**：人类友好的格式，易于理解和维护
- **版本控制友好**：通常提交到代码仓库，便于团队协作
- **环境区分**：可以有多个文件（如 `config.yaml`、`config.prod.yaml`）

**适用场景：**
- 应用程序的基础配置（服务器端口、超时时间、功能开关等）
- 业务逻辑相关的配置参数
- 不敏感的配置信息
- 需要复杂数据结构的配置

**示例：**
```yaml
server:
  host: "0.0.0.0"
  port: 8080
  timeout: 30s

database:
  mysql:
    max_connections: 100
    retry_times: 3
```

### 🔐 .env环境变量文件的用途

**主要特点：**
- **敏感信息存储**：适合存放密码、密钥、令牌等机密信息
- **环境特定**：每个部署环境有独立的环境变量
- **运行时覆盖**：可以在运行时动态覆盖配置文件中的值
- **安全性**：通常不提交到版本控制系统

**适用场景：**
- 数据库密码、API密钥、JWT密钥等敏感信息
- 环境特定的配置（开发、测试、生产环境的差异）
- 部署时需要动态调整的参数
- CI/CD流水线中的配置注入

**示例：**
```env
NEOSCAN_JWT_SECRET=your-super-secret-jwt-key
NEOSCAN_DATABASE_MYSQL_PASSWORD=your-db-password
NEOSCAN_MAIL_PASSWORD=your-email-password
NEOSCAN_APP_ENV=production
```

### ⚖️ 两者的关系与配合

**优先级机制：**
1. **环境变量** > **YAML配置文件**
2. 环境变量可以覆盖YAML中的对应配置
3. YAML提供默认值，环境变量提供环境特定值

**配合使用模式：**
```yaml
# config.yaml - 提供默认配置
jwt:
  expire_hours: 24  # 默认值
  
database:
  mysql:
    host: "localhost"  # 默认值
    port: 3306        # 默认值
```

```env
# .env - 覆盖敏感或环境特定配置
NEOSCAN_JWT_SECRET=actual-secret-key
NEOSCAN_DATABASE_MYSQL_HOST=prod-db-server
NEOSCAN_DATABASE_MYSQL_PASSWORD=prod-password
```

### 🔄 实际工作流程

**开发阶段：**
1. YAML文件定义完整的配置结构和默认值
2. `.env`文件提供开发环境的具体值
3. 开发者可以本地调整`.env`而不影响团队

**部署阶段：**
1. YAML文件随代码一起部署
2. 运维人员在服务器上设置环境变量
3. 容器化部署时通过环境变量注入配置

### 🛡️ 安全考虑

**YAML配置文件：**
- ✅ 可以提交到Git仓库
- ✅ 团队共享和版本控制
- ❌ 不应包含敏感信息

**.env环境变量文件：**
- ❌ 不应提交到Git仓库（添加到`.gitignore`）
- ✅ 适合存储敏感信息
- ✅ 每个环境独立管理

### 📝 最佳实践

1. **分离关注点**：配置结构用YAML，敏感信息用环境变量
2. **提供示例**：创建`.env.example`文件作为模板
3. **文档化**：在README中说明哪些环境变量是必需的
4. **验证机制**：在应用启动时验证必需的环境变量
5. **默认值**：在YAML中提供合理的默认值

### 🎯 总结

YAML配置文件和.env环境变量文件是互补的配置管理方案：
- **YAML**：负责应用的结构化配置和默认值
- **.env**：负责敏感信息和环境特定的配置覆盖

这种设计模式既保证了配置的灵活性和安全性，又便于团队协作和多环境部署。
        